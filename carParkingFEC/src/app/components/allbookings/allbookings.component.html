
<div class="all-bookings-page">
  <h2>Всички резервации</h2>

  <div class="filter-row">
    <label for="parkingSelect">Паркинг:</label>
    <select
      id="parkingSelect"
      [(ngModel)]="selectedParkingId"
      (change)="onParkingChange()">
      <option [ngValue]="null">-- избери паркинг --</option>
      <option *ngFor="let p of parkings" [ngValue]="p.id">
        {{ p.name }}
      </option>
    </select>
  </div>

  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <div *ngIf="!selectedParkingId" class="hint">
    Моля, изберете паркинг, за да видите резервациите.
  </div>

  <div *ngIf="loading" class="loading">
    Зареждане на резервациите...
  </div>

  <table *ngIf="selectedParkingId && bookings.length > 0 && !loading" class="bookings-table">
    <thead>
    <tr>
      <th>#</th>
      <th>Паркинг</th>
      <th>Място</th>
      <th>Клиент</th>
      <th>Начало</th>
      <th>Край</th>
      <th>Сума (лв)</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let b of bookings; let i = index">
      <td>{{ i + 1 }}</td>
      <td>{{ b.parkingName }}</td>
      <td>{{ b.spaceNumber }}</td>
      <td>{{ b.userEmail || 'Гост потребител' }}</td>
      <td>{{ b.startTime | date:'dd.MM.yyyy HH:mm' }}</td>
      <td>{{ b.endTime   | date:'dd.MM.yyyy HH:mm' }}</td>
      <td>{{ (b.amountBgn ?? 0) | number:'1.2-2' }}</td>
    </tr>
    </tbody>
  </table>

  <div
    *ngIf="selectedParkingId && !loading && bookings.length === 0"
    class="hint">
    Няма резервации за избрания паркинг.
  </div>
</div>
