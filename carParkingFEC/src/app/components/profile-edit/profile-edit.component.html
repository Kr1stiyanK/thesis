<div class="container">
  <h2>Редактирай профил</h2>
  <button (click)="showEmailForm = !showEmailForm">Промени имейл адрес</button>
  <button (click)="showPasswordForm = !showPasswordForm">Промени парола</button>

  <div *ngIf="showEmailForm" class="form-container">
    <form [formGroup]="profileForm" (ngSubmit)="updateEmail()">
      <div>
        <label for="currentEmail">Текущ имейл:</label>
        <input id="currentEmail" formControlName="currentEmail" type="email">
        <div *ngIf="profileForm.get('currentEmail')?.invalid && (profileForm.get('currentEmail')?.dirty || profileForm.get('currentEmail')?.touched)">
          <small *ngIf="profileForm.get('currentEmail')?.errors?.['required']">Текущият имейл е задължителен.</small>
          <small *ngIf="profileForm.get('currentEmail')?.errors?.['email']">Невалиден имейл формат.</small>
        </div>
      </div>
      <div>
        <label for="newEmail">Нов имейл:</label>
        <input id="newEmail" formControlName="newEmail" type="email">
        <div *ngIf="profileForm.get('newEmail')?.invalid && (profileForm.get('newEmail')?.dirty || profileForm.get('newEmail')?.touched)">
          <small *ngIf="profileForm.get('newEmail')?.errors?.['required']">Новият имейл е задължителен.</small>
          <small *ngIf="profileForm.get('newEmail')?.errors?.['email']">Невалиден имейл формат.</small>
        </div>
      </div>
      <button type="submit" [disabled]="!profileForm.valid">Промени имейл</button>
    </form>
  </div>

  <div *ngIf="showPasswordForm" class="form-container">
    <form [formGroup]="changePasswordForm" (ngSubmit)="changePassword()">
      <div>
        <label for="currentPassword">Текуща парола:</label>
        <input id="currentPassword" formControlName="currentPassword" type="password">
        <div *ngIf="changePasswordForm.get('currentPassword')?.invalid && (changePasswordForm.get('currentPassword')?.dirty || changePasswordForm.get('currentPassword')?.touched)">
          <small *ngIf="changePasswordForm.get('currentPassword')?.errors?.['required']">Текущата парола е задължителна.</small>
        </div>
      </div>
      <div>
        <label for="newPassword">Нова парола:</label>
        <input id="newPassword" formControlName="newPassword" type="password">
        <div *ngIf="changePasswordForm.get('newPassword')?.invalid && (changePasswordForm.get('newPassword')?.dirty || changePasswordForm.get('newPassword')?.touched)">
          <small *ngIf="changePasswordForm.get('newPassword')?.errors?.['required']">Новата парола е задължителна.</small>
          <small *ngIf="changePasswordForm.get('newPassword')?.errors?.['minlength']">Новата парола трябва да е поне 6 символа.</small>
        </div>
      </div>
      <div>
        <label for="confirmPassword">Потвърди нова парола:</label>
        <input id="confirmPassword" formControlName="confirmPassword" type="password">
        <div *ngIf="changePasswordForm.get('confirmPassword')?.invalid && (changePasswordForm.get('confirmPassword')?.dirty || changePasswordForm.get('confirmPassword')?.touched)">
          <small *ngIf="changePasswordForm.get('confirmPassword')?.errors?.['required']">Потвърджението на новата парола е задължително.</small>
          <small *ngIf="changePasswordForm.errors?.['mismatch']">Паролите не съвпадат.</small>
        </div>
      </div>
      <button type="submit" [disabled]="!changePasswordForm.valid">Промени парола</button>
    </form>
  </div>
</div>
