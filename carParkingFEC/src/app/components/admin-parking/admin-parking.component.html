<div class="admin-parking-wrapper">
  <h2>Моите паркинги</h2>

  <div *ngIf="loading">
    Зареждане...
  </div>

  <div *ngIf="!loading && !showCreateForm">
    <!-- Тук по-късно ще визуализираме списъка с паркинги -->
    <p>Вече имате създадени паркинги. В следваща стъпка ще направим детайлно управление и визуализация.</p>
  </div>

  <div *ngIf="!loading && showCreateForm" class="create-form-card">
    <h3>Създай нов паркинг</h3>

    <form [formGroup]="parkingForm" (ngSubmit)="onSubmit()">

      <div class="form-row">
        <label>Име на паркинга</label>
        <input type="text" formControlName="name" />
      </div>

      <div class="form-row">
        <label>Адрес</label>
        <input type="text" formControlName="address" />
      </div>

      <div class="form-row">
        <label>Брой паркоместа</label>
        <input type="number" formControlName="spacesCount" min="1" />
      </div>

      <div class="form-row">
        <label>Цена на час (лв.)</label>
        <input type="number" step="0.01" min="0" formControlName="pricePerHourBgn" />
        <small>По-късно ще я визуализираме и в евро.</small>
      </div>

      <div class="form-row checkbox-row">
        <label>
          <input type="checkbox" formControlName="cardPaymentEnabled" />
          Възможно ли е плащане с карта?
        </label>
      </div>

      <div class="form-row checkbox-row">
        <label>
          <input type="checkbox" formControlName="loyaltyEnabled" />
          Активиране на лоялна програма
        </label>
      </div>

      <div class="loyalty-group" *ngIf="parkingForm.get('loyaltyEnabled')?.value">

        <div class="form-row">
          <label>1 бонус точка на колко посещения?</label>
          <input type="number" formControlName="loyaltyVisitPerPoint" min="1" />
        </div>

        <div class="form-row">
          <label>Необходими бонус точки за награда</label>
          <input type="number" formControlName="loyaltyPointsRequired" min="1" />
        </div>

        <div class="form-row">
          <label>Награда (безплатни часове)</label>
          <select formControlName="loyaltyRewardHours">
            <option *ngFor="let opt of loyaltyOptions" [value]="opt.value">
              {{ opt.label }}
            </option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <label>URL към карта/легенда на паркинга (по желание)</label>
        <input type="text" formControlName="mapImageUrl" />
      </div>

      <button type="submit" class="submit-btn">Запази паркинг</button>
    </form>
  </div>
</div>
